{
  "version": 3,
  "file": "select.test.js",
  "sourceRoot": "../..",
  "sources": [
    "src/tests/select.test.coffee"
  ],
  "names": [],
  "mappings": ";AAEA;EAAA;AAAA,MAAA,GAAA,EAAA,CAAA,EAAA,EAAA,EAAA,KAAA,EAAA,KAAA,EAAA,IAAA,EAAA,CAAA,EAAA,IAAA,EAAA,IAAA,EAAA,EAAA,EAAA,GAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,OAAA;;;EAIA,GAAA,GAA4B,OAAA,CAAQ,KAAR;;EAC5B,GAAA,GAA4B,GAAG,CAAC;;EAChC,KAAA,GAA4B;;EAC5B,KAAA,GAA4B,GAAG,CAAC,UAAJ,CAAe,OAAf,EAA4B,KAA5B;;EAC5B,IAAA,GAA4B,GAAG,CAAC,UAAJ,CAAe,MAAf,EAA4B,KAA5B;;EAC5B,IAAA,GAA4B,GAAG,CAAC,UAAJ,CAAe,MAAf,EAA4B,KAA5B;;EAC5B,IAAA,GAA4B,GAAG,CAAC,UAAJ,CAAe,MAAf,EAA4B,KAA5B;;EAC5B,IAAA,GAA4B,GAAG,CAAC,UAAJ,CAAe,MAAf,EAA4B,KAA5B;;EAC5B,OAAA,GAA4B,GAAG,CAAC,UAAJ,CAAe,SAAf,EAA4B,KAA5B;;EAC5B,IAAA,GAA4B,GAAG,CAAC,IAAI,CAAC,IAAT,CAAc,GAAd,EAb5B;;;EAeA,IAAA,GAA4B,OAAA,CAAQ,UAAR;;EAC5B,EAAA,GAA4B,IAAI,CAAC,UAhBjC;;;EAkBA,CAAA,GAA4B,OAAA,CAAQ,WAAR;;EAC5B,EAAA,GAA4B,OAAA,CAAQ,OAAR,EAnB5B;;;;;EAuBA,CAAA,GAAI,MAAA,QAAA,CAAE,CAAF,EAAK,MAAL,EAAa,KAAb,EAAoB,OAApB,EAA6B,cAA7B,CAAA;AACF,QAAA,KAAA,EAAA;IAAA,cAAA,GAAoB,sBAAH,GAA0B,IAAI,MAAJ,CAAW,cAAX,CAA1B,GAA2D;AAC5E;MACE,MAAA,GAAS,CAAA,MAAM,MAAA,CAAA,CAAN,EADX;KAAA,cAAA;MAEM,eAEJ;;MAAA,IAAG,wBAAA,IAAoB,CAAE,cAAc,CAAC,IAAf,CAAoB,KAAK,CAAC,OAA1B,CAAF,CAAvB;QACE,IAAA,CAAK,GAAG,CAAC,KAAJ,CAAU,EAAA,CAAG,CAAE,KAAF,EAAS,IAAT,EAAe,cAAc,CAAC,MAA9B,CAAH,CAAV,CAAL;QACA,CAAC,CAAC,EAAF,CAAK,IAAL,EAFF;OAAA,MAAA;QAIE,IAAA,CAAK,GAAG,CAAC,MAAJ,CAAW,sBAAX,EAAqC,EAAA,CAAG,CAAE,KAAF,EAAS,IAAT,EAAe,KAAK,CAAC,OAArB,CAAH,CAArC,CAAL;QACA,CAAC,CAAC,IAAF,CAAO,CAAA,+BAAA,CAAA,CAAkC,EAAA,CAAG,KAAH,CAAlC,CAA2C,GAA3C,CAAA,CAAgD,KAAK,CAAC,OAAtD,CAAA,CAAP,EALF;OAAA;;AAOA,aAAO,KAXT;;IAYA,IAAG,GAAG,CAAC,MAAJ,CAAW,MAAX,EAAmB,OAAnB,CAAH;MACE,CAAC,CAAC,EAAF,CAAK,IAAL;MACA,IAAA,CAAK,GAAG,CAAC,IAAJ,CAAS,EAAA,CAAG,CAAE,KAAF,EAAS,MAAT,EAAiB,IAAjB,CAAH,CAAT,CAAL,EAFF;KAAA,MAAA;MAIE,CAAC,CAAC,IAAF,CAAO,CAAA,YAAA,CAAA,CAAe,EAAA,CAAG,MAAH,CAAf,CAAyB,UAAzB,CAAA,CAAqC,EAAA,CAAG,OAAH,CAArC,CAAA,CAAP;MACA,IAAA,CAAK,GAAG,CAAC,GAAJ,CAAQ,EAAA,CAAG,CAAE,KAAF,EAAS,MAAT,EAAiB,IAAjB,CAAH,CAAR,CAAL,EALF;KAbA;;AAoBA,WAAO;EArBL,EAvBJ;;;EA+CA,IAAG,CAAA,sBAAA,CAAH,GAA8B,MAAA,QAAA,CAAE,CAAF,EAAK,IAAL,CAAA;AAC5B,QAAA,cAAA,EAAA,CAAA,EAAA,GAAA,EAAA,OAAA,EAAA,MAAA,EAAA,KAAA,EAAA;IAAA,mBAAA,GAAsB;MACpB;QAAC,EAAD;QAAI;UAAC,QAAA,EAAS,EAAV;UAAa,MAAA,EAAO;QAApB,CAAJ;QAA4B,IAA5B;OADoB;MAEpB;QAAC,MAAD;QAAQ;UAAC,QAAA,EAAS,GAAV;UAAc,MAAA,EAAO;QAArB,CAAR;QAAoC,IAApC;OAFoB;MAGpB;QAAC,MAAD;QAAQ;UAAC,QAAA,EAAS,GAAV;UAAc,MAAA,EAAO;QAArB,CAAR;QAAoC,IAApC;OAHoB;MAIpB,CAAC,IAAD;MAAM,IAAN;MAAW,IAAX,CAJoB;MAKpB;QAAC,MAAD;QAAQ;UAAC,QAAA,EAAS,GAAV;UAAc,MAAA,EAAO;QAArB,CAAR;QAAoC,IAApC;OALoB;MAMpB;QAAC,OAAD;QAAS;UAAC,QAAA,EAAS,IAAV;UAAe,MAAA,EAAO;QAAtB,CAAT;QAAsC,IAAtC;OANoB;MAOpB;QAAC,QAAD;QAAU;UAAC,QAAA,EAAS,KAAV;UAAgB,MAAA,EAAO;QAAvB,CAAV;QAAwC,IAAxC;OAPoB;MAQpB,CAAC,OAAD;MAAS,IAAT;MAAc,IAAd,CARoB;MASpB;QAAC,WAAD;QAAa;UAAC,QAAA,EAAS,GAAV;UAAc,QAAA,EAAS,MAAvB;UAA8B,MAAA,EAAO;QAArC,CAAb;QAAyD,IAAzD;OAToB;MAUpB;QAAC,WAAD;QAAa;UAAC,QAAA,EAAS,GAAV;UAAc,QAAA,EAAS,MAAvB;UAA8B,MAAA,EAAO;QAArC,CAAb;QAAyD,IAAzD;OAVoB;MAWpB;QAAC,WAAD;QAAa;UAAC,QAAA,EAAS,GAAV;UAAc,QAAA,EAAS,MAAvB;UAA8B,MAAA,EAAO;QAArC,CAAb;QAAyD,IAAzD;OAXoB;MAYpB;QAAC,YAAD;QAAc;UAAC,QAAA,EAAS,IAAV;UAAe,QAAA,EAAS,MAAxB;UAA+B,MAAA,EAAO;QAAtC,CAAd;QAA2D,IAA3D;OAZoB;MAapB;QAAC,aAAD;QAAe;UAAC,QAAA,EAAS,KAAV;UAAgB,QAAA,EAAS,MAAzB;UAAgC,MAAA,EAAO;QAAvC,CAAf;QAA6D,IAA7D;OAboB;MAcpB;QAAC,KAAD;QAAO;UAAC,QAAA,EAAS,KAAV;UAAgB,MAAA,EAAO;QAAvB,CAAP;QAAkC,IAAlC;OAdoB;MAAtB;;IAiBA,KAAA,qDAAA;MAAI,CAAE,KAAF,EAAS,OAAT,EAAkB,cAAlB;MACF,MAAA,GAAS,QAAA,CAAA,CAAA;AACP,YAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAAA,IAAA,EAAA;QAAA,CAAA,uGAAqD;QACrD,IAAmB,SAAnB;AAAA,iBAAO,KAAP;;QACA,KAAA,QAAA;;UACE,IAAmB,KAAA,KAAS,MAA5B;YAAA,OAAO,CAAG,CAAA,GAAA,EAAV;;QADF;AAEA,eAAO;MALA;MAMT,MAAM,CAAA,CAAE,CAAF,EAAK,MAAL,EAAa,KAAb,EAAoB,OAApB,EAA6B,cAA7B;IAPR;IAQA,IAAA,CAAA;AACA,WAAO;EA3BqB,EA/C9B;;;EA6EA,IAAG,CAAA,mBAAA,CAAH,GAA2B,MAAA,QAAA,CAAE,CAAF,EAAK,IAAL,CAAA;AACzB,QAAA,cAAA,EAAA,CAAA,EAAA,GAAA,EAAA,OAAA,EAAA,MAAA,EAAA,KAAA,EAAA;IAAA,mBAAA,GAAsB;MACpB,CAAC,MAAD;MAAQ,IAAR;MAAa,IAAb,CADoB;MAEpB;QAAC,OAAD;QAAS;UAAC,OAAA,EAAQ,GAAT;UAAa,MAAA,EAAO;QAApB,CAAT;QAAqC,IAArC;OAFoB;MAGpB;QAAC,OAAD;QAAS;UAAC,OAAA,EAAQ,GAAT;UAAa,MAAA,EAAO;QAApB,CAAT;QAAqC,IAArC;OAHoB;MAIpB;QAAC,OAAD;QAAS;UAAC,OAAA,EAAQ,GAAT;UAAa,MAAA,EAAO;QAApB,CAAT;QAAqC,IAArC;OAJoB;MAKpB;QAAC,UAAD;QAAY;UAAC,OAAA,EAAQ,GAAT;UAAa,MAAA,EAAO;QAApB,CAAZ;QAA2C,IAA3C;OALoB;MAMpB;QAAC,eAAD;QAAiB;UAAC,OAAA,EAAQ,GAAT;UAAa,QAAA,EAAS,MAAtB;UAA6B,MAAA,EAAO;QAApC,CAAjB;QAAgE,IAAhE;OANoB;MAOpB;QAAC,WAAD;QAAa;UAAC,OAAA,EAAQ,GAAT;UAAa,QAAA,EAAS,MAAtB;UAA6B,MAAA,EAAO;QAApC,CAAb;QAAwD,IAAxD;OAPoB;MAQpB;QAAC,WAAD;QAAa;UAAC,OAAA,EAAQ,GAAT;UAAa,QAAA,EAAS,MAAtB;UAA6B,MAAA,EAAO;QAApC,CAAb;QAAwD,IAAxD;OARoB;MASpB,CAAC,YAAD;MAAc,IAAd;MAAmB,IAAnB,CAToB;MAUpB,CAAC,YAAD;MAAc,IAAd;MAAmB,IAAnB,CAVoB;MAAtB;;IAaA,KAAA,qDAAA;MAAI,CAAE,KAAF,EAAS,OAAT,EAAkB,cAAlB;MACF,MAAA,GAAS,QAAA,CAAA,CAAA;AACP,YAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAAA,IAAA,EAAA;QAAA,CAAA,oGAAkD;QAClD,IAAmB,SAAnB;AAAA,iBAAO,KAAP;;QACA,KAAA,QAAA;;UACE,IAAmB,KAAA,KAAS,MAA5B;YAAA,OAAO,CAAG,CAAA,GAAA,EAAV;;QADF;AAEA,eAAO;MALA;MAMT,MAAM,CAAA,CAAE,CAAF,EAAK,MAAL,EAAa,KAAb,EAAoB,OAApB,EAA6B,cAA7B;IAPR;IAQA,IAAA,CAAA;AACA,WAAO;EAvBkB,EA7E3B;;;EAuGA,IAAG,CAAA,mBAAA,CAAH,GAA2B,MAAA,QAAA,CAAE,CAAF,EAAK,IAAL,CAAA;AACzB,QAAA,cAAA,EAAA,CAAA,EAAA,GAAA,EAAA,OAAA,EAAA,MAAA,EAAA,KAAA,EAAA;IAAA,mBAAA,GAAsB;MACpB,CAAC,WAAD;MAAa,CAAC,KAAD;MAAO,UAAP,CAAb;MAAgC,IAAhC,CADoB;MAEpB;QAAC,MAAD;QAAQ;UAAC,YAAD;UAAc;YAAC,QAAA,EAAS,GAAV;YAAc,MAAA,EAAO;UAArB,CAAd;SAAR;QAAmD,IAAnD;OAFoB;MAGpB,CAAC,SAAD;MAAW,CAAC,UAAD;MAAY,IAAZ,CAAX;MAA6B,IAA7B,CAHoB;MAAtB;;IAMA,KAAA,qDAAA;MAAI,CAAE,KAAF,EAAS,OAAT,EAAkB,cAAlB;MACF,MAAA,GAAS,QAAA,CAAA,CAAA;AACP,YAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAAA;QAAA,IAAkB,KAAK,CAAC,UAAN,CAAiB,KAAjB,CAAlB;UAAA,KAAA,GAAQ,CAAE,QAAA,CAAA,CAAA,EAAA,CAAF,EAAR;;QACA,CAAA,GAAQ,CAAC,CAAC,kBAAF,CAAqB,KAArB;QACR,IAAG,CAAG,CAAA,CAAA,CAAH,KAAU,YAAb;AACE;UAAA,KAAA,UAAA;;YACE,IAAwB,KAAA,KAAS,MAAjC;cAAA,OAAO,CAAG,CAAA,CAAA,CAAK,CAAA,GAAA,EAAf;;UADF,CADF;SAAA,MAGK,IAAG,CAAG,CAAA,CAAA,CAAH,KAAU,UAAb;UACH,CAAG,CAAA,CAAA,CAAH,GAAS,KADN;;AAEL,eAAO;MARA;MAST,MAAM,CAAA,CAAE,CAAF,EAAK,MAAL,EAAa,KAAb,EAAoB,OAApB,EAA6B,cAA7B;IAVR;IAWA,IAAA,CAAA;AACA,WAAO;EAnBkB,EAvG3B;;;EA6HA,IAAG,CAAA,UAAA,CAAH,GAAkB,MAAA,QAAA,CAAE,CAAF,EAAK,IAAL,CAAA;AAChB,QAAA,cAAA,EAAA,CAAA,EAAA,GAAA,EAAA,OAAA,EAAA,MAAA,EAAA,KAAA,EAAA;IAAA,mBAAA,GAAsB;MACpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,KAAA,EAAM;UAArB,CAAF;UAA4B,SAA5B;SAAD;QAAwC,IAAxC;OADoB;MAEpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,KAAA,EAAM,EAArB;YAAwB,OAAA,EAAQ;UAAhC,CAAF;UAAyC,SAAzC;SAAD;QAAqD,KAArD;OAFoB;MAGpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,KAAA,EAAM,EAArB;YAAwB,OAAA,EAAQ;UAAhC,CAAF;UAAyC,UAAzC;UAAqD,SAArD;SAAD;QAAiE,IAAjE;OAHoB;MAIpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAgC,UAAhC;UAA4C,SAA5C;SAAD;QAAwD,IAAxD;OAJoB;MAKpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAgC,UAAhC;UAA4C,SAA5C;SAAD;QAAwD,KAAxD;OALoB;MAMpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAgC,UAAhC;UAA4C,UAA5C;SAAD;QAAyD,IAAzD;OANoB;MAOpB;QAAC;UAAE;YAAC,GAAA,EAAI;UAAL,CAAF;UAAmB,UAAnB;UAA+B,SAA/B;SAAD;QAA2C,IAA3C;OAPoB;MAQpB;QAAC;UAAE;YAAC,GAAA,EAAI;UAAL,CAAF;UAAmB,UAAnB;UAA+B,SAA/B;SAAD;QAA2C,KAA3C;OARoB;MASpB;QAAC;UAAE;YAAC,GAAA,EAAI;UAAL,CAAF;UAAmB,UAAnB;UAA+B,UAA/B;SAAD;QAA4C,IAA5C;OAToB;MAUpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAgC,SAAhC;SAAD;QAA4C,KAA5C;OAVoB;MAWpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAgC,SAAhC;SAAD;QAA4C,KAA5C;OAXoB;MAYpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAgC,UAAhC;SAAD;QAA6C,KAA7C;OAZoB;MAAtB;;IAeA,KAAA,qDAAA;MAAI,CAAE,KAAF,EAAS,OAAT,EAAkB,cAAlB;MACF,MAAA,GAAS,QAAA,CAAA,CAAA;AACP,YAAA,CAAA,EAAA;QAAA,CAAE,CAAF,EAAK,GAAA,SAAL,CAAA,GAAuB;AACvB,eAAO,EAAE,CAAC,MAAH,CAAU,CAAV,EAAa,GAAA,SAAb;MAFA;MAGT,MAAM,CAAA,CAAE,CAAF,EAAK,MAAL,EAAa,KAAb,EAAoB,OAApB,EAA6B,cAA7B;IAJR;IAKA,IAAA,CAAA;AACA,WAAO;EAtBS,EA7HlB;;;EAsJA,IAAG,CAAA,sBAAA,CAAH,GAA8B,MAAA,QAAA,CAAE,CAAF,EAAK,IAAL,CAAA;AAC5B,QAAA,cAAA,EAAA,CAAA,EAAA,GAAA,EAAA,OAAA,EAAA,MAAA,EAAA,KAAA,EAAA;IAAA,mBAAA,GAAsB;MACpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,KAAA,EAAM;UAArB,CAAF;UAAyC,CAAC,SAAD,CAAzC;SAAD;QAAuE,IAAvE;OADoB;MAEpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,KAAA,EAAM,EAArB;YAAwB,OAAA,EAAQ;UAAhC,CAAF;UAAyC,CAAC,SAAD,CAAzC;SAAD;QAAuE,KAAvE;OAFoB;MAGpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,KAAA,EAAM,EAArB;YAAwB,OAAA,EAAQ;UAAhC,CAAF;UAAyC,CAAC,UAAD;UAAa,SAAb,CAAzC;SAAD;QAAuE,IAAvE;OAHoB;MAIpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAyC,CAAC,UAAD;UAAa,SAAb,CAAzC;SAAD;QAAuE,IAAvE;OAJoB;MAKpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAyC,CAAC,UAAD;UAAa,SAAb,CAAzC;SAAD;QAAuE,KAAvE;OALoB;MAMpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAyC,CAAC,UAAD;UAAa,UAAb,CAAzC;SAAD;QAAuE,IAAvE;OANoB;MAOpB;QAAC;UAAE;YAAC,GAAA,EAAI;UAAL,CAAF;UAAyC,CAAC,UAAD;UAAa,SAAb,CAAzC;SAAD;QAAuE,IAAvE;OAPoB;MAQpB;QAAC;UAAE;YAAC,GAAA,EAAI;UAAL,CAAF;UAAyC,CAAC,UAAD;UAAa,SAAb,CAAzC;SAAD;QAAuE,KAAvE;OARoB;MASpB;QAAC;UAAE;YAAC,GAAA,EAAI;UAAL,CAAF;UAAyC,CAAC,UAAD;UAAa,UAAb,CAAzC;SAAD;QAAuE,IAAvE;OAToB;MAUpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAyC,CAAC,SAAD,CAAzC;SAAD;QAAuE,KAAvE;OAVoB;MAWpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAyC,CAAC,SAAD,CAAzC;SAAD;QAAuE,KAAvE;OAXoB;MAYpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,OAAA,EAAQ;UAAvB,CAAF;UAAyC,CAAC,UAAD,CAAzC;SAAD;QAAuE,KAAvE;OAZoB;MAAtB;;IAeA,KAAA,qDAAA;MAAI,CAAE,KAAF,EAAS,OAAT,EAAkB,cAAlB;MACF,MAAA,GAAS,QAAA,CAAA,CAAA;AACP,YAAA,CAAA,EAAA;QAAA,CAAE,CAAF,EAAK,GAAA,SAAL,CAAA,GAAuB;AACvB,eAAO,EAAE,CAAC,MAAH,CAAU,CAAV,EAAa,GAAA,SAAb;MAFA;MAGT,MAAM,CAAA,CAAE,CAAF,EAAK,MAAL,EAAa,KAAb,EAAoB,OAApB,EAA6B,cAA7B;IAJR;IAKA,IAAA,CAAA;AACA,WAAO;EAtBqB,EAtJ9B;;;EA+KA,IAAG,CAAA,UAAA,CAAH,GAAkB,MAAA,QAAA,CAAE,CAAF,EAAK,IAAL,CAAA;AAChB,QAAA,cAAA,EAAA,CAAA,EAAA,GAAA,EAAA,OAAA,EAAA,MAAA,EAAA,KAAA,EAAA;IAAA,mBAAA,GAAsB;MACpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,KAAA,EAAM;UAArB,CAAF;UAA4B,SAA5B;UAAuC,uBAAvC;SAAD;QAAiE,KAAjE;OADoB;MAEpB;QAAC;UAAE;YAAC,GAAA,EAAI,SAAL;YAAe,KAAA,EAAM;UAArB,CAAF;UAA4B,SAA5B;UAAuC,uBAAvC;SAAD;QAAiE,IAAjE;OAFoB;MAAtB;;IAKA,KAAA,qDAAA;MAAI,CAAE,KAAF,EAAS,OAAT,EAAkB,cAAlB;MACF,MAAA,GAAS,QAAA,CAAA,CAAA;AACP,YAAA,CAAA,EAAA;QAAA,CAAE,CAAF,EAAK,GAAA,SAAL,CAAA,GAAuB;QACvB,SAAW,CAAA,SAAS,CAAC,MAAV,GAAmB,CAAnB,CAAX,GAAoC,IAAA,CAAK,SAAW,CAAA,SAAS,CAAC,MAAV,GAAmB,CAAnB,CAAhB;AACpC,eAAO,EAAE,CAAC,MAAH,CAAU,CAAV,EAAa,GAAA,SAAb;MAHA;MAIT,MAAM,CAAA,CAAE,CAAF,EAAK,MAAL,EAAa,KAAb,EAAoB,OAApB,EAA6B,cAA7B;IALR;IAMA,IAAA,CAAA;AACA,WAAO;EAbS,EA/KlB;;;;;;;;EAwMA,IAAO,qBAAP;IACE,IAAA,CAAK,IAAL,EADF;;AAxMA",
  "sourcesContent": [
    "\n\n'use strict'\n\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'PIPEDREAMS/TESTS/SELECT'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\ntest                      = require 'guy-test'\njr                        = JSON.stringify\n#...........................................................................................................\nL                         = require '../select'\nPD                        = require '../..'\n# { $, $async, }            = PD\n\n#-----------------------------------------------------------------------------------------------------------\nf = ( T, method, probe, matcher, errmsg_pattern ) ->\n  errmsg_pattern = if errmsg_pattern? then ( new RegExp errmsg_pattern ) else null\n  try\n    result = await method()\n  catch error\n    # throw error\n    if errmsg_pattern? and ( errmsg_pattern.test error.message )\n      echo CND.green jr [ probe, null, errmsg_pattern.source, ]\n      T.ok true\n    else\n      echo CND.indigo \"unexpected exception\", ( jr [ probe, null, error.message, ] )\n      T.fail \"unexpected exception for probe #{jr probe}:\\n#{error.message}\"\n      # return reject \"failed with #{error.message}\"\n    return null\n  if CND.equals result, matcher\n    T.ok true\n    echo CND.lime jr [ probe, result, null, ]\n  else\n    T.fail \"neq: result #{jr result}, matcher #{jr matcher}\"\n    echo CND.red jr [ probe, result, null, ]\n  # return resolve result\n  return result\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"selector keypatterns\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"\",{\"sigils\":\"\",\"name\":\"\"},null]\n    [\"^foo\",{\"sigils\":\"^\",\"name\":\"foo\"},null]\n    [\"<foo\",{\"sigils\":\"<\",\"name\":\"foo\"},null]\n    [\"  \",null,null]\n    [\">foo\",{\"sigils\":\">\",\"name\":\"foo\"},null]\n    [\"<>foo\",{\"sigils\":\"<>\",\"name\":\"foo\"},null]\n    [\"<>^foo\",{\"sigils\":\"<>^\",\"name\":\"foo\"},null]\n    [\"^ foo\",null,null]\n    [\"^prfx:foo\",{\"sigils\":\"^\",\"prefix\":\"prfx\",\"name\":\"foo\"},null]\n    [\"<prfx:foo\",{\"sigils\":\"<\",\"prefix\":\"prfx\",\"name\":\"foo\"},null]\n    [\">prfx:foo\",{\"sigils\":\">\",\"prefix\":\"prfx\",\"name\":\"foo\"},null]\n    [\"<>prfx:foo\",{\"sigils\":\"<>\",\"prefix\":\"prfx\",\"name\":\"foo\"},null]\n    [\"<>^prfx:foo\",{\"sigils\":\"<>^\",\"prefix\":\"prfx\",\"name\":\"foo\"},null]\n    [\"^<>\",{\"sigils\":\"^<>\",\"name\":\"\"},null]\n    ]\n  #.........................................................................................................\n  for [ probe, matcher, errmsg_pattern, ] in probes_and_matchers\n    method = ->\n      R = ( probe.match L._selector_keypattern )?.groups ? null\n      return null unless R?\n      for key, value of R\n        delete R[ key ] if value is undefined\n      return R\n    await f T, method, probe, matcher, errmsg_pattern\n  done()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"event keypatterns\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"text\",null,null]\n    [\"^text\",{\"sigil\":\"^\",\"name\":\"text\"},null]\n    [\"<bold\",{\"sigil\":\"<\",\"name\":\"bold\"},null]\n    [\">bold\",{\"sigil\":\">\",\"name\":\"bold\"},null]\n    [\"~collect\",{\"sigil\":\"~\",\"name\":\"collect\"},null]\n    [\"~kwic:collect\",{\"sigil\":\"~\",\"prefix\":\"kwic\",\"name\":\"collect\"},null]\n    [\"<kwic:bar\",{\"sigil\":\"<\",\"prefix\":\"kwic\",\"name\":\"bar\"},null]\n    [\">kwic:bar\",{\"sigil\":\">\",\"prefix\":\"kwic\",\"name\":\"bar\"},null]\n    [\">!kwic:bar\",null,null]\n    [\"<>kwic:bar\",null,null]\n    ]\n  #.........................................................................................................\n  for [ probe, matcher, errmsg_pattern, ] in probes_and_matchers\n    method = ->\n      R = ( probe.match L._event_keypattern )?.groups ? null\n      return null unless R?\n      for key, value of R\n        delete R[ key ] if value is undefined\n      return R\n    await f T, method, probe, matcher, errmsg_pattern\n  done()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"classify_selector\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [\"#justatag\",[\"tag\",\"justatag\"],null]\n    [\"^bar\",[\"keypattern\",{\"sigils\":\"^\",\"name\":\"bar\"}],null]\n    [\"!!!(->)\",[\"function\",null],null]\n    ]\n  #.........................................................................................................\n  for [ probe, matcher, errmsg_pattern, ] in probes_and_matchers\n    method = ->\n      probe = ( -> ) if probe.startsWith '!!!'\n      R     = L._classify_selector probe\n      if R[ 0 ] is 'keypattern'\n        for key, value of R[ 1 ]\n          delete R[ 1 ][ key ] if value is undefined\n      else if R[ 0 ] is 'function'\n        R[ 1 ] = null\n      return R\n    await f T, method, probe, matcher, errmsg_pattern\n  done()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"select 2\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [[ {key:'^number',value:42}, '^number'],true]\n    [[ {key:'^number',value:42,stamped:true}, '^number'],false]\n    [[ {key:'^number',value:42,stamped:true}, '#stamped', '^number'],true]\n    [[ {key:'<italic',stamped:true}, '#stamped', '<italic'],true]\n    [[ {key:'<italic',stamped:true}, '#stamped', '>italic'],false]\n    [[ {key:'<italic',stamped:true}, '#stamped', '<>italic'],true]\n    [[ {key:'<italic'}, '#stamped', '<italic'],true]\n    [[ {key:'<italic'}, '#stamped', '>italic'],false]\n    [[ {key:'<italic'}, '#stamped', '<>italic'],true]\n    [[ {key:'<italic',stamped:true}, '<italic'],false]\n    [[ {key:'<italic',stamped:true}, '>italic'],false]\n    [[ {key:'<italic',stamped:true}, '<>italic'],false]\n    ]\n  #.........................................................................................................\n  for [ probe, matcher, errmsg_pattern, ] in probes_and_matchers\n    method = ->\n      [ d, selectors..., ] = probe\n      return PD.select d, selectors...\n    await f T, method, probe, matcher, errmsg_pattern\n  done()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"select 2 using lists\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [[ {key:'^number',value:42},              ['^number',             ]  ],true]\n    [[ {key:'^number',value:42,stamped:true}, ['^number',             ]  ],false]\n    [[ {key:'^number',value:42,stamped:true}, ['#stamped', '^number', ]  ],true]\n    [[ {key:'<italic',stamped:true},          ['#stamped', '<italic', ]  ],true]\n    [[ {key:'<italic',stamped:true},          ['#stamped', '>italic', ]  ],false]\n    [[ {key:'<italic',stamped:true},          ['#stamped', '<>italic',]  ],true]\n    [[ {key:'<italic'},                       ['#stamped', '<italic', ]  ],true]\n    [[ {key:'<italic'},                       ['#stamped', '>italic', ]  ],false]\n    [[ {key:'<italic'},                       ['#stamped', '<>italic',]  ],true]\n    [[ {key:'<italic',stamped:true},          ['<italic',             ]  ],false]\n    [[ {key:'<italic',stamped:true},          ['>italic',             ]  ],false]\n    [[ {key:'<italic',stamped:true},          ['<>italic',            ]  ],false]\n    ]\n  #.........................................................................................................\n  for [ probe, matcher, errmsg_pattern, ] in probes_and_matchers\n    method = ->\n      [ d, selectors..., ] = probe\n      return PD.select d, selectors...\n    await f T, method, probe, matcher, errmsg_pattern\n  done()\n  return null\n\n#-----------------------------------------------------------------------------------------------------------\n@[ \"select 3\" ] = ( T, done ) ->\n  probes_and_matchers = [\n    [[ {key:'^number',value:42}, '^number', \"( d ) => d.value > 42\"],false]\n    [[ {key:'^number',value:44}, '^number', \"( d ) => d.value > 42\"],true]\n    ]\n  #.........................................................................................................\n  for [ probe, matcher, errmsg_pattern, ] in probes_and_matchers\n    method = ->\n      [ d, selectors..., ] = probe\n      selectors[ selectors.length - 1 ] = eval selectors[ selectors.length - 1 ]\n      return PD.select d, selectors...\n    await f T, method, probe, matcher, errmsg_pattern\n  done()\n  return null\n\n\n# first-only\n# last-only\n# before-start\n# after-stop\n\n\n\n\n############################################################################################################\nunless module.parent?\n  test @\n\n\n\n"
  ]
}